<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:mycharts="http://xmlns.jcp.org/jsf/composite/mycharts"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <p:commandButton value="Add widget" showEffect="fade" hideEffect="fade" oncomplete="PF('chartSettingDialog').show()"
                     style="margin-top:10px;"/>

    <h:panelGrid columns="1" cellpadding="0" rendered="#{chartBean.chartConfigs.size()>0}">
        <c:forEach items="#{chartBean.chartConfigs}" var="chart">
            <mycharts:mychart id="component#{chart.chartId}" heigth="#{chart.height}px"
                              width="#{chart.width}px" chartOptions="#{chart.chartConfig}"
                              requestDataOptions="#{chart.requestDataConfig}" refreshInterval="0"/>
        </c:forEach>
    </h:panelGrid>

    <p:dialog header="Chart settings" widgetVar="chartSettingDialog">
        <h:panelGrid columns="2" cellpadding="5">
            <h:outputLabel for="height" value="Height:"/>
            <p:inputText id="height" value="#{chartBean.height}"/>
            <h:outputLabel for="width" value="Width:"/>
            <p:inputText id="width" value="#{chartBean.width}"/>
            <h:outputLabel for="object" value="Basic:"/>
            <p:selectCheckboxMenu id="object" value="#{chartBean.selectedSmartObjects}" converter="smartObjectConverter"
                                  label="Select">
                <f:selectItems value="#{chartBean.smartObjects}" var="smartObject" itemValue="#{smartObject}"
                               itemLabel="#{smartObject.name}"/>
            </p:selectCheckboxMenu>
            <h:outputLabel for="metric" value="Basic:"/>
            <p:selectCheckboxMenu id="metric" value="#{chartBean.selectedMetricSpecs}" converter="metricSpecConverter"
                                  label="Select">
                <f:selectItems value="#{chartBean.metricSpecs}" var="metricSpec" itemValue="#{metricSpec}"
                               itemLabel="#{metricSpec.specName}"/>
            </p:selectCheckboxMenu>

            <p:commandButton value="Submit" action="#{chartBean.addChart()}" update="centerForm"
                             style="margin-top:10px;"/>
        </h:panelGrid>
    </p:dialog>


</ui:composition>
