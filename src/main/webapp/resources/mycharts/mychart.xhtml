<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

<!--Define component's attribute-->
<cc:interface>
    <cc:attribute name="width"/>
    <cc:attribute name="heigth"/>
    <cc:attribute name="title"/>
    <cc:attribute name="subTitle"/>
    <cc:attribute name="yLabel"/>
    <cc:attribute name="xLabel"/>
    <cc:attribute name="data"/>
</cc:interface>

<!--Define component-->
<cc:implementation>
    <h:inputHidden id="chart_input_data" value="#{cc.attrs.data}" />

    <div id="#{cc.id}_chartDiv" style="width:#{cc.attrs.width}; height: #{cc.attrs.heigth}">

        <!--Google highchart example-->
        <script type="text/javascript">
            var data_for_chart = $.parseJSON($('input[id$="chart_input_data"]').val());

            $(function () {

                var options = {
                    credits: {
                        enabled: false
                    },
                    chart: {
                        renderTo: '#{cc.id}_chartDiv',
                        zoomType: 'x',
                        type : 'spline'
                    },
                    title: {
                        text: '#{cc.attrs.title}'
                    },
                    subtitle: {
                        text: '#{cc.attrs.subTitle}'
                    },
                    xAxis: {
                        title: {
                            text: '#{cc.attrs.xLabel}'
                        }
                    },
                    yAxis: {
                        title: {
                            text: '#{cc.attrs.yLabel}'
                        }
                    },
                    series: [{}]
                };
                if (typeof options.series !== "undefined") {
                    if (options.series.length > 1) {
                        options.legend.enabled = true;
                    }
                    options.series[0].data = data_for_chart;
                    var chart = new Highcharts.Chart(options);
                }
            });
        </script>
    </div>
</cc:implementation>
</html>
